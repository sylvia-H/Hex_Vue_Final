"use strict";(self["webpackChunkhealthy_diet"]=self["webpackChunkhealthy_diet"]||[]).push([[582],{367:function(e,a,t){t.d(a,{Z:function(){return u}});var s=t(6252),l=t(6949);const i={class:"loader"},d=(0,s.uE)('<div class="load_base load1"><div class="load_base out_loader"><img src="'+l+'" alt="logo"></div></div><div class="load_base load2"><div class="load_base in_loader in_loader1"></div><div class="load_base in_loader in_loader2"></div><div class="load_base in_loader in_loader3"></div><div class="load_base in_loader in_loader4"></div></div>',2),o=[d];function r(e,a,t,l,d,r){return(0,s.wg)(),(0,s.iD)("div",i,o)}var c={name:"VueLoader"},n=t(3744);const m=(0,n.Z)(c,[["render",r]]);var u=m},6582:function(e,a,t){t.r(a),t.d(a,{default:function(){return P}});var s=t(6252),l=t(3577);const i={class:"container py-20"},d=(0,s.uE)('<div class="row mb-6"><div class="col-12 col-lg-7"><div class="row g-0 | timeline"><div class="col-3"><div class="timeline-pointer"><h6 class="fw-light mt-5">確認訂單</h6></div></div><div class="col-3"><div class="timeline-pointer"><h6 class="fw-bold mt-5">填寫訂購資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">填寫付款資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">完成訂購</h6></div></div></div></div></div>',1),o={class:"row flex-column flex-md-row"},r={class:"col-12 col-lg-7 | mb-6"},c={class:"table table-hover"},n=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",width:"20%"}),(0,s._)("th",{scope:"col",class:"text-center"},"品名"),(0,s._)("th",{scope:"col",width:"10%",class:"text-center"},"單價"),(0,s._)("th",{scope:"col",width:"20%",class:"text-center"},"數量"),(0,s._)("th",{scope:"col",width:"8%",class:"text-end"})])],-1),m=["src","alt"],u={class:"fw-bold me-6"},f={class:"d-flex justify-content-center align-items-center"},v={class:"fw-bold text-black text-center"},h=(0,s._)("td",null,null,-1),_={class:"col-12 offset-lg-1 col-lg-4"},p={class:"border border-dark p-6"},b=(0,s.uE)('<h5>訂購人資訊</h5><div class="row my-5"><div class="col-4"><hr></div><div class="col-4 d-flex justify-content-center align-items-center"><div class="fz-3"><span class="text-danger mx-1">*</span> 為必填欄位 </div></div><div class="col-4"><hr></div></div>',2),g={class:"mb-10"},w={class:"form-floating mb-5"},x=(0,s._)("label",{for:"femail"},[(0,s.Uk)(" Email "),(0,s._)("span",{class:"text-danger ms-1"},"*")],-1),y={class:"form-floating mb-5"},k=(0,s._)("label",{for:"fname"},[(0,s.Uk)(" 收件人姓名 "),(0,s._)("span",{class:"text-danger ms-1"},"*")],-1),V={class:"form-floating mb-5"},D=(0,s._)("label",{for:"fphone"},[(0,s.Uk)(" 收件人電話 "),(0,s._)("span",{class:"text-danger ms-1"},"*")],-1),L={class:"form-floating mb-5"},W=(0,s._)("label",{for:"faddress"},[(0,s.Uk)(" 收件人地址 "),(0,s._)("span",{class:"text-danger ms-1"},"*")],-1),$={class:"form-floating mb-5"},z=(0,s._)("span",{class:"mb-4"},"留言",-1),U=(0,s._)("br",null,null,-1),j={class:"bg-light p-5 mb-5"},C={class:"d-flex justify-content-between | mb-6"},E=(0,s._)("p",{class:"fw-500"},"小計",-1),q={class:"fw-light"},N={class:"d-flex justify-content-between | mb-6"},T=(0,s._)("p",{class:"fw-500"},"折扣",-1),Z={class:"fw-light"},F={class:"d-flex justify-content-between"},O=(0,s._)("p",{class:"fz-5"},"總金額",-1),H={class:"fz-5 fw-bold"},S={class:"row d-flex justify-content-end | my-8 my-md-4"},Y={class:"col-6"},I=(0,s._)("button",{type:"button",class:"btn btn-outline-dark w-100"}," 返回 ",-1),K={class:"col-6"},M=["disabled"];function R(e,a,t,R,A,B){const G=(0,s.up)("VueLoader"),J=(0,s.up)("VLoading"),P=(0,s.up)("VField"),Q=(0,s.up)("ErrorMessage"),X=(0,s.up)("RouterLink"),ee=(0,s.up)("VForm");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(J,{active:A.isLoading,"z-index":1e3},{default:(0,s.w5)((()=>[(0,s.Wm)(G)])),_:1},8,["active"]),(0,s._)("div",i,[d,(0,s._)("div",o,[(0,s._)("div",r,[(0,s._)("table",c,[n,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(A.carts.carts,(e=>((0,s.wg)(),(0,s.iD)("tr",{key:e.id,class:"align-middle"},[(0,s._)("td",null,[(0,s._)("img",{src:e.product.imageUrl,alt:e.product.title,class:"img-cover w-100 h-100"},null,8,m)]),(0,s._)("td",null,[(0,s._)("p",null,(0,l.zw)(e.product.title),1)]),(0,s._)("td",null,[(0,s._)("p",u,"NT$"+(0,l.zw)(e.product.price),1)]),(0,s._)("td",null,[(0,s._)("div",f,[(0,s._)("p",v,(0,l.zw)(e.qty),1)])]),h])))),128))])])]),(0,s._)("div",_,[(0,s._)("div",p,[b,(0,s._)("div",g,[(0,s.Wm)(ee,{ref:"form",onSubmit:B.submitOrder},{default:(0,s.w5)((({errors:e})=>[(0,s._)("div",w,[(0,s.Wm)(P,{rules:"email|required",class:"form-control",modelValue:A.formData.user.email,"onUpdate:modelValue":a[0]||(a[0]=e=>A.formData.user.email=e),id:"femail",name:"E-mail",type:"email"},null,8,["modelValue"]),x,(0,s.Wm)(Q,{name:"E-mail",class:"d-block text-end invalid-feedback"})]),(0,s._)("div",y,[(0,s.Wm)(P,{rules:"required",class:"form-control",modelValue:A.formData.user.name,"onUpdate:modelValue":a[1]||(a[1]=e=>A.formData.user.name=e),type:"text",id:"fname",name:"收件人姓名"},null,8,["modelValue"]),k,(0,s.Wm)(Q,{name:"收件人姓名",class:"d-block text-end invalid-feedback"})]),(0,s._)("div",V,[(0,s.Wm)(P,{rules:"required|min:8|max:10",class:"form-control",modelValue:A.formData.user.tel,"onUpdate:modelValue":a[2]||(a[2]=e=>A.formData.user.tel=e),type:"tel",id:"fphone",name:"收件人電話"},null,8,["modelValue"]),D,(0,s.Wm)(Q,{name:"收件人電話",class:"d-block text-end invalid-feedback"})]),(0,s._)("div",L,[(0,s.Wm)(P,{rules:"required",class:"form-control",modelValue:A.formData.user.address,"onUpdate:modelValue":a[3]||(a[3]=e=>A.formData.user.address=e),type:"text",id:"faddress",name:"收件人地址"},null,8,["modelValue"]),W,(0,s.Wm)(Q,{name:"收件人地址",class:"d-block text-end invalid-feedback"})]),(0,s._)("div",$,[z,U,(0,s.Wm)(P,{as:"textarea",modelValue:A.formData.message,"onUpdate:modelValue":a[4]||(a[4]=e=>A.formData.message=e),class:"form-control",cols:"10",rows:"5",type:"text",id:"fmsg",name:"留言",placeholder:"請輸入留言",value:""},null,8,["modelValue"])]),(0,s._)("div",j,[(0,s._)("div",C,[E,(0,s._)("p",q,"NT$ "+(0,l.zw)(A.carts.total)+" 元",1)]),(0,s._)("div",N,[T,(0,s._)("p",Z," NT$ "+(0,l.zw)(A.carts.total-A.carts.final_total)+" 元 ",1)]),(0,s._)("div",F,[O,(0,s._)("p",H,"NT$ "+(0,l.zw)(A.carts.final_total)+" 元",1)])]),(0,s._)("div",S,[(0,s._)("div",Y,[(0,s.Wm)(X,{to:{name:"checkoutCart"}},{default:(0,s.w5)((()=>[I])),_:1})]),(0,s._)("div",K,[(0,s._)("button",{type:"submit",disabled:Object.keys(e).length>0||0===A.carts.carts?.length||!A.formData.user.name||!A.formData.user.email||!A.formData.user.tel||!A.formData.user.address,class:"btn btn-danger w-100"}," 送出訂單 ",8,M)])])])),_:1},8,["onSubmit"])])])])])])],64)}var A=t(367),B={components:{VueLoader:A.Z},data(){return{isLoading:!1,carts:[],formData:{user:{name:"",email:"",tel:"",address:""},message:""}}},inject:["emitter"],methods:{getCart(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((e=>{this.carts=e.data.data,this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},editCart(e,a){this.isLoading=!0;const t={product_id:e,qty:a};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${e}`,{data:t}).then((()=>{this.getCart(),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},submitOrder(){this.isLoading=!0;const e=this.formData;this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sylviah/order",{data:e}).then((e=>{this.$refs.form.resetForm(),this.isLoading=!1,this.emitter.emit("toast-msg",{style:"success",content:`已成功送出訂單！總金額 NT$ ${e.data.total} 元`}),this.emitter.emit("get-cart"),this.$router.push(`./payment/${e.data.orderId}`)})).catch((()=>{this.isLoading=!1,this.emitter.emit("toast-msg",{style:"error",content:"送出訂單失敗，請再試一次！"})}))}},mounted(){this.getCart()}},G=t(3744);const J=(0,G.Z)(B,[["render",R]]);var P=J}}]);
//# sourceMappingURL=582.ab24acc1.js.map