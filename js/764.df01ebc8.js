"use strict";(self["webpackChunkhealthy_diet"]=self["webpackChunkhealthy_diet"]||[]).push([[764],{4593:function(e,t,l){l.r(t),l.d(t,{default:function(){return Gt}});var a=l(6252),o=l(3577);const i={class:"container"},n={class:"row py-3"},s={class:"col-10 offset-1"},r={class:"d-flex justify-content-between mx-6 my-8"},m=(0,a._)("h2",null,"產品列表",-1),d={class:"table-responsive"},c={class:"table table-hover mt-4 text-center"},p=(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",null,"分類"),(0,a._)("th",null,"產品名稱"),(0,a._)("th",null,"原售價（元）"),(0,a._)("th",null,"優惠價（元）"),(0,a._)("th",null,"是否上架"),(0,a._)("th",null,"編輯")])],-1),u={class:"badge bg-primary"},b=["onClick"],_=["onClick"],g={class:"btn-group",role:"group"},h=["onClick"],f=(0,a._)("i",{class:"bi bi-pencil-square"},null,-1),y=[f],v=["onClick"],I=(0,a._)("i",{class:"bi bi-trash"},null,-1),w=[I],U=(0,a.Uk)(" 目前有 "),k=(0,a.Uk)(" 項產品 "),x=(0,a._)("br",null,null,-1);function P(e,t,l,f,I,P){const C=(0,a.up)("VueLoader"),V=(0,a.up)("VLoading"),D=(0,a.up)("PaginationProducts"),$=(0,a.up)("ModalEdit");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(V,{active:I.isLoading,"z-index":1e3},{default:(0,a.w5)((()=>[(0,a.Wm)(C)])),_:1},8,["active"]),(0,a._)("div",i,[(0,a._)("div",n,[(0,a._)("div",s,[(0,a._)("div",r,[m,(0,a._)("button",{type:"button",class:"btn btn-outline-dark",onClick:t[0]||(t[0]=e=>{P.openEditModal(1,null)})}," 建立新的產品 ")]),(0,a._)("div",d,[(0,a._)("table",c,[p,(0,a._)("tbody",null,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(I.products,(l=>((0,a.wg)(),(0,a.iD)("tr",{key:l.id},[(0,a._)("td",null,[(0,a._)("p",u,(0,o.zw)(l.category),1)]),(0,a._)("td",null,(0,o.zw)(l.title),1),(0,a._)("td",null,(0,o.zw)(l.origin_price),1),(0,a._)("td",null,(0,o.zw)(l.price),1),(0,a._)("td",null,[l.is_enabled?((0,a.wg)(),(0,a.iD)("span",{key:0,onClick:e=>P.changeStatus(l.id),onKeydown:t[1]||(t[1]=(...t)=>e.enter&&e.enter(...t)),class:"btn btn-success py-2 px-2 rounded"}," 上架 ",40,b)):((0,a.wg)(),(0,a.iD)("span",{key:1,onClick:e=>P.changeStatus(l.id),onKeydown:t[2]||(t[2]=(...t)=>e.enter&&e.enter(...t)),class:"btn btn-dark py-2 px-2 rounded"}," 未上架 ",40,_))]),(0,a._)("td",null,[(0,a._)("div",g,[(0,a._)("button",{type:"button",class:"btn btn-warning",onClick:e=>P.openEditModal(0,l)},y,8,h),(0,a._)("button",{type:"button",class:"btn btn-danger",onClick:e=>P.delProduct(l)},w,8,v)])])])))),128))])])]),(0,a._)("p",null,[U,(0,a._)("span",null,(0,o.zw)(I.products.length),1),k]),x,(0,a.Wm)(D,{pagination:I.pagination,class:"d-flex justify-content-center",onGetProducts:P.getProducts},null,8,["pagination","onGetProducts"])]),(0,a.Wm)($,{ref:"editProductModal",onEditProduct:P.editProduct},null,8,["onEditProduct"])])])],64)}var C=l(9963);const V={"aria-label":"Page navigation"},D={class:"pagination"},$=(0,a._)("span",{"aria-hidden":"true"},"«",-1),F=[$],L=["onClick"],M=(0,a._)("span",{"aria-hidden":"true"},"»",-1),z=[M];function N(e,t,l,i,n,s){return(0,a.wg)(),(0,a.iD)("nav",V,[(0,a._)("ul",D,[(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!l.pagination.has_pre}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[0]||(t[0]=(0,C.iM)((t=>e.$emit("get-products",l.pagination.current_page-1)),["prevent"]))},F)],2),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.pagination.total_pages,((t,i)=>((0,a.wg)(),(0,a.iD)("li",{class:(0,o.C_)(["page-item",{active:t===l.pagination.current_page}]),key:i},[(0,a._)("a",{class:"page-link",href:"#",onClick:(0,C.iM)((l=>e.$emit("get-products",t)),["prevent"])},(0,o.zw)(t),9,L)],2)))),128)),(0,a._)("li",{class:(0,o.C_)(["page-item",{disabled:!l.pagination.has_next}])},[(0,a._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[1]||(t[1]=(0,C.iM)((t=>e.$emit("get-products",l.pagination.current_page+1)),["prevent"]))},z)],2)])])}var S={name:"PaginationProducts",props:["pagination"]},E=l(3744);const B=(0,E.Z)(S,[["render",N]]);var K=B;const H={id:"editModal",class:"modal fade",tabindex:"-1","aria-labelledby":"productEditModalLabel","aria-hidden":"true"},J={class:"modal-dialog modal-xl modal-dialog-centered"},O={class:"modal-content border-0"},T=(0,a._)("div",{class:"modal-header bg-dark text-white"},[(0,a._)("h5",{class:"modal-title"},[(0,a._)("span",null,"新增產品")]),(0,a._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),W={class:"modal-body"},Y={class:"row"},Z={class:"col-sm-4"},j={class:"bg-secondary text-light rounded p-4 mb-4"},q=(0,a._)("h4",{class:"mb-3"},"圖檔上傳區",-1),G={for:"btnUploadImg"},A={key:0,class:"text-danger fw-bolder mb-3"},Q={key:1,class:"mb-3"},R={class:"input-group mb-3"},X=(0,a._)("span",{class:"material-icons"}," content_copy ",-1),ee=[X],te=["textContent"],le={class:"mb-2"},ae={class:"mb-3"},oe=(0,a._)("h4",{class:"mb-3"},"產品主圖",-1),ie={class:"border mb-8"},ne={class:"p-8"},se=["src","alt"],re=(0,a._)("h4",{class:"mb-3"},"新增其他附圖",-1),me={class:"input-group mb-3"},de=["onUpdate:modelValue"],ce=["onClick"],pe=(0,a._)("i",{class:"bi bi-trash"},null,-1),ue=[pe],be={class:"p-8"},_e=["src","alt"],ge={class:"col-sm-8"},he={class:"row"},fe={class:"mb-3 col-md-6"},ye={for:"title",class:"form-label w-100"},ve=(0,a.Uk)(" 產品名稱 "),Ie={class:"mb-3 col-md-6"},we={for:"category",class:"form-label w-100"},Ue=(0,a.Uk)(" 類別 "),ke={class:"row"},xe={class:"mb-3 col-md-6"},Pe={for:"number",class:"form-label w-100"},Ce=(0,a.Uk)(" 內含產品數量 "),Ve={class:"mb-3 col-md-6"},De={for:"unit",class:"form-label w-100"},$e=(0,a.Uk)(" 單位 "),Fe={class:"row"},Le={class:"mb-3 col-md-6"},Me={for:"origin_price",class:"form-label w-100"},ze=(0,a.Uk)(" 原價 "),Ne={class:"mb-3 col-md-6"},Se={for:"price",class:"form-label w-100"},Ee=(0,a.Uk)(" 優惠價 "),Be=(0,a._)("hr",null,null,-1),Ke={class:"mb-3"},He={for:"description",class:"form-label w-100"},Je=(0,a.Uk)(" 產品描述 "),Oe={class:"mb-3"},Te={for:"content",class:"form-label w-100"},We=(0,a.Uk)(" 說明內容 "),Ye={class:"mb-3"},Ze={class:"form-check"},je={class:"form-check-label",for:"is_enabled"},qe=(0,a.Uk)(" 是否上架 "),Ge=(0,a._)("hr",null,null,-1),Ae={class:"row"},Qe={class:"mb-3"},Re={class:"form-check"},Xe={class:"form-check-label",for:"is_nutrients"},et=(0,a.Uk)(" 是否啟用營養成分表 "),tt={class:"mb-3 col-md-4"},lt={for:"calorie",class:"form-label w-100"},at=(0,a.Uk)(" 熱量 "),ot={class:"mb-3 col-md-4"},it={for:"carbohydrate",class:"form-label w-100"},nt=(0,a.Uk)(" 總碳水化合物 "),st={class:"mb-3 col-md-4"},rt={for:"crudeFat",class:"form-label w-100"},mt=(0,a.Uk)(" 粗脂肪 "),dt={class:"mb-3 col-md-4"},ct={for:"SaturatedFat",class:"form-label w-100"},pt=(0,a.Uk)(" 飽和脂肪 "),ut={class:"mb-3 col-md-4"},bt={for:"protein",class:"form-label w-100"},_t=(0,a.Uk)(" 粗蛋白 "),gt={class:"mb-3 col-md-4"},ht={for:"DietaryFiber",class:"form-label w-100"},ft=(0,a.Uk)(" 膳食纖維 "),yt={class:"mb-3 col-md-4"},vt={for:"sodium",class:"form-label w-100"},It=(0,a.Uk)(" 鈉 "),wt={class:"mb-3 col-md-4"},Ut={for:"calcium",class:"form-label w-100"},kt=(0,a.Uk)(" 鈣 "),xt={class:"mb-3 col-md-4"},Pt={for:"potassium",class:"form-label w-100"},Ct=(0,a.Uk)(" 鉀 "),Vt={class:"mb-3 col-md-4"},Dt={for:"zinc",class:"form-label w-100"},$t=(0,a.Uk)(" 鋅 "),Ft={class:"mb-3 col-md-4"},Lt={for:"magnesium",class:"form-label w-100"},Mt=(0,a.Uk)(" 鎂 "),zt={class:"mb-3 col-md-4"},Nt={for:"iron",class:"form-label w-100"},St=(0,a.Uk)(" 鐵 "),Et={class:"modal-footer"},Bt=(0,a._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Kt(e,t,l,i,n,s){return(0,a.wg)(),(0,a.iD)("div",H,[(0,a._)("div",J,[(0,a._)("div",O,[T,(0,a._)("div",W,[(0,a._)("div",Y,[(0,a._)("div",Z,[(0,a._)("div",j,[q,(0,a._)("label",G,[(0,a._)("input",{type:"file",class:"form-control mb-3",onChange:t[0]||(t[0]=(...e)=>s.uploadProductImg&&s.uploadProductImg(...e)),id:"btnUploadImg",placeholder:"請輸入圖片連結"},null,32)]),n.is_uploadImg?((0,a.wg)(),(0,a.iD)("p",A," 圖片上傳中...請靜待回傳結果 ")):((0,a.wg)(),(0,a.iD)("p",Q,"圖檔網址回傳結果：")),(0,a._)("div",R,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control",id:"imgFileLink","onUpdate:modelValue":t[1]||(t[1]=e=>n.uploadImgFile.imageUrl=e),"aria-label":"圖檔連結位址",placeholder:"圖檔連結位址"},null,512),[[C.nr,n.uploadImgFile.imageUrl]]),(0,a._)("button",{type:"button",class:"input-group-text",id:"btn_copyLink",onClick:t[2]||(t[2]=e=>s.copyText()),"data-clipboard-target":"#imgFileLink"},ee)]),(0,a._)("p",{textContent:(0,o.zw)(n.uploadImgFile.message)},null,8,te)]),(0,a._)("div",le,[(0,a._)("div",ae,[oe,(0,a._)("div",ie,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control mb-3","aria-label":"請輸入圖片網址或上傳圖檔","aria-describedby":"button-addon2",placeholder:"請輸入圖片連結位址","onUpdate:modelValue":t[3]||(t[3]=e=>n.tempItem.imageUrl=e)},null,512),[[C.nr,n.tempItem.imageUrl]]),(0,a._)("div",ne,[(0,a._)("img",{src:n.tempItem.imageUrl,alt:n.tempItem.title+"主圖"},null,8,se)])])])]),(0,a._)("div",null,[re,((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.tempItem.imagesUrl,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"border mb-8"},[(0,a._)("div",me,[(0,a.wy)((0,a._)("input",{type:"text",class:"form-control","aria-label":"請輸入圖片網址","aria-describedby":"button-addon2",placeholder:"請輸入圖片連結位址或上傳圖檔","onUpdate:modelValue":e=>n.tempItem.imagesUrl[t]=e},null,8,de),[[C.nr,n.tempItem.imagesUrl[t]]]),(0,a._)("button",{class:"btn btn-danger",type:"button",onClick:e=>n.tempItem.imagesUrl.splice(t,1)},ue,8,ce)]),(0,a._)("div",be,[(0,a._)("img",{src:e,alt:n.tempItem.title+"附圖"+(Number(t)+1)},null,8,_e)])])))),128)),(0,a._)("button",{type:"button",class:"btn btn-outline-primary btn-sm d-block w-100",onClick:t[4]||(t[4]=e=>n.tempItem.imagesUrl.push(""))}," 新增圖片 ")])]),(0,a._)("div",ge,[(0,a._)("div",he,[(0,a._)("div",fe,[(0,a._)("label",ye,[ve,(0,a.wy)((0,a._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入產品名稱","onUpdate:modelValue":t[5]||(t[5]=e=>n.tempItem.title=e)},null,512),[[C.nr,n.tempItem.title]])])]),(0,a._)("div",Ie,[(0,a._)("label",we,[Ue,(0,a.wy)((0,a._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入產品類別","onUpdate:modelValue":t[6]||(t[6]=e=>n.tempItem.category=e)},null,512),[[C.nr,n.tempItem.category]])])])]),(0,a._)("div",ke,[(0,a._)("div",xe,[(0,a._)("label",Pe,[Ce,(0,a.wy)((0,a._)("input",{id:"number",type:"number",class:"form-control",placeholder:"請輸入數量","onUpdate:modelValue":t[7]||(t[7]=e=>n.tempItem.number=e)},null,512),[[C.nr,n.tempItem.number,void 0,{number:!0}]])])]),(0,a._)("div",Ve,[(0,a._)("label",De,[$e,(0,a.wy)((0,a._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":t[8]||(t[8]=e=>n.tempItem.unit=e)},null,512),[[C.nr,n.tempItem.unit]])])])]),(0,a._)("div",Fe,[(0,a._)("div",Le,[(0,a._)("label",Me,[ze,(0,a.wy)((0,a._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入產品原價","onUpdate:modelValue":t[9]||(t[9]=e=>n.tempItem.origin_price=e)},null,512),[[C.nr,n.tempItem.origin_price,void 0,{number:!0}]])])]),(0,a._)("div",Ne,[(0,a._)("label",Se,[Ee,(0,a.wy)((0,a._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入折扣優惠價","onUpdate:modelValue":t[10]||(t[10]=e=>n.tempItem.price=e)},null,512),[[C.nr,n.tempItem.price,void 0,{number:!0}]])])])]),Be,(0,a._)("div",Ke,[(0,a._)("label",He,[Je,(0,a.wy)((0,a._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":t[11]||(t[11]=e=>n.tempItem.description=e)},"\n                  ",512),[[C.nr,n.tempItem.description]])])]),(0,a._)("div",Oe,[(0,a._)("label",Te,[We,(0,a.wy)((0,a._)("textarea",{id:"content",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":t[12]||(t[12]=e=>n.tempItem.content=e)},"\n                  ",512),[[C.nr,n.tempItem.content]])])]),(0,a._)("div",Ye,[(0,a._)("div",Ze,[(0,a._)("label",je,[qe,(0,a.wy)((0,a._)("input",{id:"is_enabled",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[13]||(t[13]=e=>n.tempItem.is_enabled=e)},null,512),[[C.e8,n.tempItem.is_enabled]])])])]),Ge,(0,a._)("div",Ae,[(0,a._)("div",Qe,[(0,a._)("div",Re,[(0,a._)("label",Xe,[et,(0,a.wy)((0,a._)("input",{id:"is_nutrients",class:"form-check-input",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":t[14]||(t[14]=e=>n.tempItem.is_nutrients=e)},null,512),[[C.e8,n.tempItem.is_nutrients]])])])]),(0,a._)("div",tt,[(0,a._)("label",lt,[at,(0,a.wy)((0,a._)("input",{id:"calorie",type:"number",min:"0",class:"form-control",placeholder:"每100g熱量","onUpdate:modelValue":t[15]||(t[15]=e=>n.tempItem.calorie=e)},null,512),[[C.nr,n.tempItem.calorie,void 0,{number:!0}]])])]),(0,a._)("div",ot,[(0,a._)("label",it,[nt,(0,a.wy)((0,a._)("input",{id:"carbohydrate",type:"number",min:"0",max:"100",class:"form-control",placeholder:"每100g總碳水化合物","onUpdate:modelValue":t[16]||(t[16]=e=>n.tempItem.carbohydrate=e)},null,512),[[C.nr,n.tempItem.carbohydrate,void 0,{number:!0}]])])]),(0,a._)("div",st,[(0,a._)("label",rt,[mt,(0,a.wy)((0,a._)("input",{id:"crudeFat",type:"number",min:"0",max:"100",class:"form-control",placeholder:"每100g粗脂肪","onUpdate:modelValue":t[17]||(t[17]=e=>n.tempItem.crudeFat=e)},null,512),[[C.nr,n.tempItem.crudeFat,void 0,{number:!0}]])])]),(0,a._)("div",dt,[(0,a._)("label",ct,[pt,(0,a.wy)((0,a._)("input",{id:"SaturatedFat",type:"number",min:"0",max:"100",class:"form-control",placeholder:"每100g飽和脂肪","onUpdate:modelValue":t[18]||(t[18]=e=>n.tempItem.SaturatedFat=e)},null,512),[[C.nr,n.tempItem.SaturatedFat,void 0,{number:!0}]])])]),(0,a._)("div",ut,[(0,a._)("label",bt,[_t,(0,a.wy)((0,a._)("input",{id:"protein",type:"number",min:"0",max:"100",class:"form-control",placeholder:"每100g粗蛋白","onUpdate:modelValue":t[19]||(t[19]=e=>n.tempItem.protein=e)},null,512),[[C.nr,n.tempItem.protein,void 0,{number:!0}]])])]),(0,a._)("div",gt,[(0,a._)("label",ht,[ft,(0,a.wy)((0,a._)("input",{id:"DietaryFiber",type:"number",min:"0",max:"100",class:"form-control",placeholder:"每100g膳食纖維","onUpdate:modelValue":t[20]||(t[20]=e=>n.tempItem.DietaryFiber=e)},null,512),[[C.nr,n.tempItem.DietaryFiber,void 0,{number:!0}]])])]),(0,a._)("div",yt,[(0,a._)("label",vt,[It,(0,a.wy)((0,a._)("input",{id:"sodium",type:"number",min:"0",class:"form-control",placeholder:"每100g含鈉(mg)","onUpdate:modelValue":t[21]||(t[21]=e=>n.tempItem.sodium=e)},null,512),[[C.nr,n.tempItem.sodium,void 0,{number:!0}]])])]),(0,a._)("div",wt,[(0,a._)("label",Ut,[kt,(0,a.wy)((0,a._)("input",{id:"calcium",type:"number",min:"0",class:"form-control",placeholder:"每100g含鈣(mg)","onUpdate:modelValue":t[22]||(t[22]=e=>n.tempItem.calcium=e)},null,512),[[C.nr,n.tempItem.calcium,void 0,{number:!0}]])])]),(0,a._)("div",xt,[(0,a._)("label",Pt,[Ct,(0,a.wy)((0,a._)("input",{id:"potassium",type:"number",min:"0",class:"form-control",placeholder:"每100g含鉀(mg)","onUpdate:modelValue":t[23]||(t[23]=e=>n.tempItem.potassium=e)},null,512),[[C.nr,n.tempItem.potassium,void 0,{number:!0}]])])]),(0,a._)("div",Vt,[(0,a._)("label",Dt,[$t,(0,a.wy)((0,a._)("input",{id:"zinc",type:"number",min:"0",class:"form-control",placeholder:"每100g含鋅(mg)","onUpdate:modelValue":t[24]||(t[24]=e=>n.tempItem.zinc=e)},null,512),[[C.nr,n.tempItem.zinc,void 0,{number:!0}]])])]),(0,a._)("div",Ft,[(0,a._)("label",Lt,[Mt,(0,a.wy)((0,a._)("input",{id:"magnesium",type:"number",min:"0",class:"form-control",placeholder:"每100g含鎂(mg)","onUpdate:modelValue":t[25]||(t[25]=e=>n.tempItem.magnesium=e)},null,512),[[C.nr,n.tempItem.magnesium,void 0,{number:!0}]])])]),(0,a._)("div",zt,[(0,a._)("label",Nt,[St,(0,a.wy)((0,a._)("input",{id:"iron",type:"number",min:"0",class:"form-control",placeholder:"每100g含鐵(mg)","onUpdate:modelValue":t[26]||(t[26]=e=>n.tempItem.iron=e)},null,512),[[C.nr,n.tempItem.iron,void 0,{number:!0}]])])])])])])]),(0,a._)("div",Et,[Bt,n.is_addNew?((0,a.wg)(),(0,a.iD)("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[27]||(t[27]=t=>{s.closeModal(),e.$emit("editProduct",n.tempItem)})}," 建立新產品 ")):((0,a.wg)(),(0,a.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:t[28]||(t[28]=t=>{s.closeModal(),e.$emit("editProduct",n.tempItem)})}," 更新產品內容 "))])])])])}var Ht=l(7244),Jt=l(2152),Ot=l.n(Jt),Tt={name:"ModalEdit",data(){return{modal:"",is_uploadImg:0,uploadImgFile:{imageUrl:"",message:""},tempItem:{imagesUrl:[]},is_addNew:0}},methods:{openModal(e,t){this.organizeData(e,t),this.modal.show()},closeModal(){this.modal.hide()},uploadProductImg(){this.is_uploadImg=1,this.uploadImgFile={imageUrl:"",message:""};const e=document.querySelector("#btnUploadImg"),t=e.files[0];console.dir(t);const l=new FormData;l.append("file-to-upload",t),this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sylviah/admin/upload",l).then((t=>{this.uploadImgFile.imageUrl=t.data.imageUrl,this.is_uploadImg=0,e.value=""})).catch((e=>{this.uploadImgFile.message=e.response.message,this.is_uploadImg=0}))},copyText(){const e=new(Ot())("#btn_copyLink");e.on("success",(e=>{e.clearSelection()}))},organizeData(e,t){this.is_addNew=e,this.tempItem={imagesUrl:[]},t&&(this.tempItem=JSON.parse(JSON.stringify(t)),t.imagesUrl||(this.tempItem.imagesUrl=[]))}},mounted(){this.modal=new Ht.u_(document.getElementById("editModal"))}};const Wt=(0,E.Z)(Tt,[["render",Kt]]);var Yt=Wt,Zt=l(4739),jt={data(){return{isLoading:!1,products:[],pagination:{},tempItemInfo:{imagesUrl:[]},is_addNewProduct:0}},components:{ModalEdit:Yt,PaginationProducts:K,VueLoader:Zt.Z},methods:{getProducts(e=1){this.isLoading=!0,this.$http.get(`https://vue3-course-api.hexschool.io/v2/api/sylviah/admin/products?page=${e}`).then((e=>{this.products=e.data.products,this.pagination=e.data.pagination,this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},changeStatus(e){this.products.forEach((t=>{const l=t;l.id===e&&(l.is_enabled?l.is_enabled=0:l.is_enabled=1,this.is_addNewProduct=0,this.editProduct(l,e))}))},editProduct(e,t){this.isLoading=!0,e&&(this.tempItemInfo=e);const l={data:this.tempItemInfo};let a="",o="";this.is_addNewProduct?(a="post",o="https://vue3-course-api.hexschool.io/v2/api/sylviah/admin/product"):(a="put",o=`https://vue3-course-api.hexschool.io/v2/api/sylviah/admin/product/${this.tempItemInfo.id||t}`),this.$http[a](o,l).then((()=>{this.isLoading=!1,this.getProducts(this.pagination.current_page),"post"===a?this.$swal.fire({icon:"success",title:"成功！",text:`成功新增 ${this.tempItemInfo.title}`}):this.$swal.fire({icon:"success",title:"成功！",text:`已更新 ${this.tempItemInfo.title} 的資訊`})})).catch((e=>{this.isLoading=!1;const t=e.response.data.message;let l="";t.forEach((e=>{l+=`${e}。\n`})),this.$swal.fire({icon:"error",title:"失敗！請重新輸入資訊。",text:l})})),this.uploadImgFile={imageUrl:"",message:""}},delProduct(e){e&&(this.tempItemInfo=e);const t=this.tempItemInfo.id,l=`https://vue3-course-api.hexschool.io/v2/api/sylviah/admin/product/${t}`;this.$swal.fire({title:`確定要刪除 ${this.tempItemInfo.title} 嗎？`,text:"商品刪除後將無法恢復。",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"確定刪除！",cancelButtonText:"取消"}).then((e=>{e.isConfirmed&&(this.isLoading=!0,this.$http.delete(l).then((()=>{this.isLoading=!1,this.getProducts(this.pagination.current_page),this.$swal.fire({icon:"success",title:"成功！",text:`已刪除 ${this.tempItemInfo.title} 的資訊`})})).catch((()=>{this.isLoading=!1,this.$swal.fire({icon:"error",title:"失敗！",text:"請再試一次"})})))}))},organizeData(e,t){this.is_addNewProduct=e,this.tempItemInfo={imagesUrl:[]},t&&(this.tempItemInfo=JSON.parse(JSON.stringify(t)),t.imagesUrl||(this.tempItemInfo.imagesUrl=[]))},openEditModal(e,t){this.organizeData(e,t),this.$refs.editProductModal.openModal(e,t)}},mounted(){this.getProducts()}};const qt=(0,E.Z)(jt,[["render",P]]);var Gt=qt}}]);
//# sourceMappingURL=764.df01ebc8.js.map