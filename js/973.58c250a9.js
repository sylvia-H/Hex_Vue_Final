"use strict";(self["webpackChunkhealthy_diet"]=self["webpackChunkhealthy_diet"]||[]).push([[973],{367:function(t,e,s){s.d(e,{Z:function(){return h}});var i=s(6252),a=s(6949);const o={class:"loader"},l=(0,i.uE)('<div class="load_base load1"><div class="load_base out_loader"><img src="'+a+'" alt="logo"></div></div><div class="load_base load2"><div class="load_base in_loader in_loader1"></div><div class="load_base in_loader in_loader2"></div><div class="load_base in_loader in_loader3"></div><div class="load_base in_loader in_loader4"></div></div>',2),c=[l];function n(t,e,s,a,l,n){return(0,i.wg)(),(0,i.iD)("div",o,c)}var d={name:"VueLoader"},r=s(3744);const g=(0,r.Z)(d,[["render",n]]);var h=g},6973:function(t,e,s){s.r(e),s.d(e,{default:function(){return Q}});var i=s(6252),a=s(3577);const o={class:"container py-20"},l=(0,i._)("h2",{class:"text-center"},"來選好食",-1),c=(0,i._)("hr",{class:"mt-8 mb-10"},null,-1),n={class:"row"},d={class:"col-12 col-lg-3 mb-10"},r={class:"row g-2 g-md-3 g-lg-4 | pe-0 pe-lg-10"},g=["onClick"],h={class:"fz-3 fz-md-4"},u={class:"col-12 col-lg-9"},m={class:"row"},_={class:"card rounded-4 overflow-hidden w-100"},v={class:"ratio ratio-4x3 hoverMask hvr-grow"},p=(0,i._)("i",{class:"bi bi-zoom-in"},null,-1),b=["src","alt"],f={class:"card-body"},w={class:"d-none d-lg-block | fz-6 mb-2"},y={class:"d-block d-lg-none | fz-4 fz-md-5 mb-2 text-center"},k={class:"d-none d-lg-flex | mb-4 align-items-center justify-content-between"},C={class:"fw-bold"},x=(0,i.Uk)(" 好食價 "),z={class:"fz-5 text-danger"},L=(0,i.Uk)(" 元 "),$={class:"fz-4 text-muted"},I={class:"d-md-block d-lg-none | mb-4 text-center"},D={class:"fw-bold"},U=(0,i.Uk)(" NT "),S={class:"fz-5 text-danger mx-2"},j={class:"fz-4 fw-normal text-muted"},V=(0,i.Uk)(" 元 "),Z={class:"d-flex justify-content-between"},F=["onClick"],H=(0,i._)("i",{class:"bi bi-heart"},null,-1),N=(0,i._)("span",{class:"d-none d-md-block | ms-2"}," 收藏 ",-1),O=[H,N],W=["onClick","disabled"],Y={key:0,class:"spinner-border spinner-border-sm text-warning",role:"status"},E=(0,i._)("span",{class:"visually-hidden"},"Loading...",-1),J=[E],K={key:1,class:"d-flex"},P=(0,i._)("i",{class:"bi bi-cart3 me-1"},null,-1),q=(0,i._)("span",{class:"d-none d-md-block"}," 加入購物車 ",-1),M=[P,q];function R(t,e,s,H,N,E){const P=(0,i.up)("VueLoader"),q=(0,i.up)("VLoading"),R=(0,i.up)("RouterLink");return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i.Wm)(q,{active:N.isLoading,"z-index":1e3},{default:(0,i.w5)((()=>[(0,i.Wm)(P)])),_:1},8,["active"]),(0,i._)("section",o,[l,c,(0,i._)("div",n,[(0,i._)("div",d,[(0,i._)("div",r,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(Object.keys(N.categories),((t,e)=>((0,i.wg)(),(0,i.iD)("div",{key:e,class:"col-4 col-md-3 col-lg-12"},[(0,i._)("button",{type:"button",class:(0,a.C_)(["btn btn-outline-gray1 fw-bold w-100 p-2 mb-1 fz-3 fz-md-4",{active:t===N.showCategory}]),onClick:e=>E.filterCategory(t)},[(0,i.Uk)((0,a.zw)(t)+" ",1),(0,i._)("span",h,(0,a.zw)(N.categories[t]?`（${N.categories[t]}）`:""),1)],10,g)])))),128))])]),(0,i._)("div",u,[(0,i._)("div",m,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(N.products,(t=>((0,i.wg)(),(0,i.iD)("div",{key:t.id,class:(0,a.C_)([{"d-none":t.category!==N.showCategory&&"全部商品"!==N.showCategory},"col-6 col-md-4 col-lg-6 col-xl-4 | p-lg-6 p-xl-4 | mb-8"])},[(0,i._)("div",_,[(0,i.Wm)(R,{to:`/product/${t.id}`},{default:(0,i.w5)((()=>[(0,i._)("div",v,[p,(0,i._)("img",{src:t.imageUrl,class:"img-cover",alt:t.title},null,8,b)])])),_:2},1032,["to"]),(0,i._)("div",f,[(0,i._)("h4",w,(0,a.zw)(t.title),1),(0,i._)("h4",y,(0,a.zw)(t.title),1),(0,i._)("div",k,[(0,i._)("p",C,[x,(0,i._)("span",z,(0,a.zw)(t.price),1),L]),(0,i._)("p",$,[(0,i._)("s",null,"原價 "+(0,a.zw)(t.origin_price)+" 元",1)])]),(0,i._)("div",I,[(0,i._)("p",D,[U,(0,i._)("span",S,(0,a.zw)(t.price),1),(0,i._)("s",j,(0,a.zw)(t.origin_price),1),V])]),(0,i._)("div",Z,[(0,i._)("button",{type:"button",onClick:e=>E.addCollection(t),class:(0,a.C_)(["btn btn-outline-danger d-flex align-items-center",{active:N.collection[t.id]}])},O,10,F),(0,i._)("button",{onClick:e=>E.addCart(t.id),disabled:t.id===N.is_loadingItem,type:"button",class:"btn btn-dark d-flex align-items-center"},[t.id===N.is_loadingItem?((0,i.wg)(),(0,i.iD)("div",Y,J)):((0,i.wg)(),(0,i.iD)("div",K,M))],8,W)])])])],2)))),128))])])])])],64)}var T=s(367),A={data(){return{products:[],categories:{"全部商品":""},showCategory:"全部商品",is_loadingItem:"",carts:[],isLoading:!1,collection:{}}},inject:["emitter"],components:{VueLoader:T.Z},methods:{getProducts(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/products/all").then((t=>{this.products=t.data.products,this.products.forEach((t=>{this.categories[t.category]?this.categories[t.category]+=1:this.categories[t.category]=1})),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},getCart(){this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((t=>{this.carts=t.data.data})).catch((t=>{console.dir(t)}))},addCart(t,e=1){const s={product_id:t,qty:e};this.is_loadingItem=t,this.$http.post("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart",{data:s}).then((t=>{const e=t.data.data.product.title,s=t.data.message;this.emitter.emit("toast-msg",{style:"success",content:`${e} ${s}`}),this.is_loadingItem="",this.getCart(),this.emitter.emit("get-cart")})).catch((t=>{const e=t.response.data.message||"出現錯誤，請重試一次！";this.emitter.emit("toast-msg",{style:"error",content:`${e}`}),this.is_loadingItem=""}))},filterCategory(t){this.showCategory=t},addCollection(t){const e=t.id;this.collection[e]?(delete this.collection[e],this.emitter.emit("toast-msg",{style:"success",content:`${t.title} 從我的收藏中移除囉！`})):(this.collection[e]=t,this.emitter.emit("toast-msg",{style:"success",content:`${t.title} 加入我的收藏囉！`})),localStorage.setItem("myFavorite",JSON.stringify(this.collection)),this.emitter.emit("get-fav")},getCollection(){if(localStorage.getItem("myFavorite")){const t=JSON.parse(localStorage.getItem("myFavorite"));this.collection=t}}},mounted(){this.getProducts(),this.getCart(),this.getCollection()}},B=s(3744);const G=(0,B.Z)(A,[["render",R]]);var Q=G}}]);
//# sourceMappingURL=973.58c250a9.js.map