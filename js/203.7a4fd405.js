"use strict";(self["webpackChunkhealthy_diet"]=self["webpackChunkhealthy_diet"]||[]).push([[203],{367:function(t,e,l){l.d(e,{Z:function(){return m}});var s=l(6252),a=l(6949);const i={class:"loader"},o=(0,s.uE)('<div class="load_base load1"><div class="load_base out_loader"><img src="'+a+'" alt="logo"></div></div><div class="load_base load2"><div class="load_base in_loader in_loader1"></div><div class="load_base in_loader in_loader2"></div><div class="load_base in_loader in_loader3"></div><div class="load_base in_loader in_loader4"></div></div>',2),d=[o];function n(t,e,l,a,o,n){return(0,s.wg)(),(0,s.iD)("div",i,d)}var c={name:"VueLoader"},r=l(3744);const h=(0,r.Z)(c,[["render",n]]);var m=h},3203:function(t,e,l){l.r(e),l.d(e,{default:function(){return dt}});var s=l(6252),a=l(3577);const i={class:"container py-20",style:{"min-height":"90vh"}},o=(0,s.uE)('<div class="row mb-6"><div class="col-12 col-lg-7"><div class="row g-0 | timeline"><div class="col-3"><div class="timeline-pointer"><h6 class="fw-bold mt-5">確認訂單</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">填寫訂購資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">填寫付款資訊</h6></div></div><div class="col-3"><div class="timeline-pointer-undone"><h6 class="fw-light mt-5">完成訂購</h6></div></div></div></div></div>',1),d={class:"row flex-column flex-md-row"},n={class:"col-12 col-lg-7 | mb-6"},c={class:"table table-hover"},r=(0,s._)("thead",null,[(0,s._)("tr",null,[(0,s._)("th",{scope:"col",width:"20%"}),(0,s._)("th",{scope:"col",class:"text-center"},"品名"),(0,s._)("th",{scope:"col",width:"10%",class:"text-center"},"單價"),(0,s._)("th",{scope:"col",width:"20%",class:"text-center"},"數量"),(0,s._)("th",{scope:"col",width:"8%",class:"text-end"},"刪除")])],-1),h=["src","alt"],m={class:"fw-bold me-6"},u={class:"btn-group d-flex justify-content-between align-items-center",role:"group","aria-label":"Basic"},v=["onClick","disabled"],b=["for"],_=["id","value"],p=["onClick"],g={class:"text-end"},f=["onClick"],y={class:"col-12 offset-lg-1 col-lg-4"},w={class:"mb-10"},C={class:"bg-light p-5"},k={class:"d-flex justify-content-between"},x=(0,s._)("p",null,"小計",-1),M={class:"row d-flex justify-content-end | my-8 my-md-4"},I={class:"col-6"},D=(0,s._)("button",{type:"button",class:"btn btn-outline-dark w-100"}," 返回 ",-1),L={class:"col-6"},$=["disabled"];function P(t,e,l,P,z,U){const j=(0,s.up)("VueLoader"),q=(0,s.up)("VLoading"),W=(0,s.up)("RouterLink"),Z=(0,s.up)("ModalDelCartPayment");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(q,{active:z.isLoading,"z-index":1e3},{default:(0,s.w5)((()=>[(0,s.Wm)(j)])),_:1},8,["active"]),(0,s._)("div",i,[o,(0,s._)("div",d,[(0,s._)("div",n,[(0,s._)("table",c,[r,(0,s._)("tbody",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(z.carts.carts,(t=>((0,s.wg)(),(0,s.iD)("tr",{key:t.id,class:"align-middle"},[(0,s._)("td",null,[(0,s._)("img",{src:t.product.imageUrl,alt:t.product.title,class:"img-cover w-100 h-100"},null,8,h)]),(0,s._)("td",null,[(0,s._)("p",null,(0,a.zw)(t.product.title),1)]),(0,s._)("td",null,[(0,s._)("p",m,"NT$"+(0,a.zw)(t.product.price),1)]),(0,s._)("td",null,[(0,s._)("div",u,[(0,s._)("button",{onClick:e=>U.editCart(t.id,t.qty-1),disabled:t.qty-1===0,type:"button",class:"btn btn-warning fw-bold d-none d-md-block"}," － ",8,v),(0,s._)("label",{for:t.id},[(0,s._)("input",{id:t.id,value:t.qty,type:"text",class:"form-control-plaintext p-0 border-0 fw-bold text-black text-center"},null,8,_)],8,b),(0,s._)("button",{onClick:e=>U.editCart(t.id,t.qty+1),type:"button",class:"btn btn-warning fw-bold d-none d-md-block"}," ＋ ",8,p)])]),(0,s._)("td",g,[(0,s._)("button",{onClick:e=>U.openDelCartModal(t.id,t.product.title),class:"btn-close",type:"button","aria-label":"Close"},null,8,f)])])))),128))])])]),(0,s._)("div",y,[(0,s._)("div",w,[(0,s._)("div",C,[(0,s._)("div",k,[x,(0,s._)("p",null,"NT$ "+(0,a.zw)(z.carts.total)+" 元",1)])]),(0,s._)("div",M,[(0,s._)("div",I,[(0,s.Wm)(W,{to:{name:"products"}},{default:(0,s.w5)((()=>[D])),_:1})]),(0,s._)("div",L,[(0,s.Wm)(W,{to:{name:"checkoutOrder"}},{default:(0,s.w5)((()=>[(0,s._)("button",{type:"button",disabled:0===z.carts.carts?.length,class:"btn btn-danger w-100"}," 下一步 ",8,$)])),_:1})])])])])])]),(0,s.Wm)(Z,{ref:"delCartPaymentModal"},null,512)],64)}var z=l(367);const U={class:"modal fade border-0",id:"delCartPaymentModal",tabindex:"-1","aria-labelledby":"delCartPaymentModalLabel","aria-hidden":"true"},j={class:"modal-dialog modal-dialog-centered"},q={class:"modal-content"},W={class:"modal-header bg-danger text-white"},Z={class:"modal-title"},V={key:0},E={key:1},B={class:"modal-body fz-5"},H={key:0},N=(0,s.Uk)(" 是否刪除 "),T={class:"text-danger"},Y=(0,s.Uk)(" ？"),K=(0,s._)("br",null,null,-1),O=(0,s.Uk)(" (刪除後將無法恢復) "),R={key:1},A=(0,s._)("strong",{class:"text-danger"},"確定要清空購物車嗎",-1),F=(0,s.Uk)(" ？"),G=(0,s._)("br",null,null,-1),J=(0,s.Uk)(" (刪除後將無法恢復) "),Q=[A,F,G,J],S={class:"modal-footer"};function X(t,e,l,i,o,d){return(0,s.wg)(),(0,s.iD)("div",U,[(0,s._)("div",j,[(0,s._)("div",q,[(0,s._)("div",W,[(0,s._)("h5",Z,[o.itemInfo.title?((0,s.wg)(),(0,s.iD)("span",V," 刪除 "+(0,a.zw)(o.itemInfo.title),1)):((0,s.wg)(),(0,s.iD)("span",E," 清空購物車 "))]),(0,s._)("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",onClick:e[0]||(e[0]=t=>d.closeModal())})]),(0,s._)("div",B,[o.itemInfo.title?((0,s.wg)(),(0,s.iD)("p",H,[N,(0,s._)("strong",T,(0,a.zw)(o.itemInfo.title),1),Y,K,O])):((0,s.wg)(),(0,s.iD)("p",R,Q))]),(0,s._)("div",S,[(0,s._)("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal",onClick:e[1]||(e[1]=t=>d.closeModal())}," 取消 "),(0,s._)("button",{type:"button",class:"btn btn-danger",onClick:e[2]||(e[2]=t=>{d.delCart()})}," 確認刪除 ")])])])])}var tt=l(7244),et={name:"ModalDelCartPayment",data(){return{modal:"",itemInfo:{}}},inject:["emitter"],methods:{openModal(t,e){t&&e&&(this.itemInfo.id=t,this.itemInfo.title=e),this.modal.show()},closeModal(){this.itemInfo={},this.modal.hide()},delCart(){let t="";this.itemInfo.id?(t=`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${this.itemInfo.id}`,this.$http.delete(t).then((()=>{this.emitter.emit("toast-msg",{style:"success",content:`您已將${this.itemInfo.title}刪除了！`}),this.closeModal(),this.emitter.emit("get-cart"),this.itemInfo={}})).catch((t=>{const e=t.response.data.message||"刪除失敗，請再試一次！";this.emitter.emit("toast-msg",{style:"error",content:`${e}`}),this.closeModal(),this.itemInfo={}}))):(t="https://vue3-course-api.hexschool.io/v2/api/sylviah/carts",this.$http.delete(t).then((()=>{this.emitter.emit("toast-msg",{style:"success",content:"您已將購物車清空了！"}),this.closeModal(),this.emitter.emit("get-cart"),this.itemInfo={}})).catch((t=>{const e=t.response.data.message||"刪除失敗，請再試一次！";this.emitter.emit("toast-msg",{style:"error",content:`${e}`}),this.closeModal(),this.itemInfo={}})))}},mounted(){this.modal=new tt.u_(document.getElementById("delCartPaymentModal"))}},lt=l(3744);const st=(0,lt.Z)(et,[["render",X]]);var at=st,it={components:{VueLoader:z.Z,ModalDelCartPayment:at},data(){return{isLoading:!1,carts:[],formData:{user:{name:"",email:"",tel:"",address:""},message:""}}},inject:["emitter"],methods:{getCart(){this.isLoading=!0,this.$http.get("https://vue3-course-api.hexschool.io/v2/api/sylviah/cart").then((t=>{this.carts=t.data.data,this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},editCart(t,e){this.isLoading=!0;const l={product_id:t,qty:e};this.$http.put(`https://vue3-course-api.hexschool.io/v2/api/sylviah/cart/${t}`,{data:l}).then((()=>{this.getCart(),this.isLoading=!1})).catch((()=>{this.isLoading=!1}))},openDelCartModal(t,e){this.$refs.delCartPaymentModal.openModal(t,e)}},mounted(){this.getCart(),this.emitter.on("get-cart",(()=>{this.getCart()}))}};const ot=(0,lt.Z)(it,[["render",P]]);var dt=ot}}]);
//# sourceMappingURL=203.7a4fd405.js.map